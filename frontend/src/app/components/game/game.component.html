<div class="">
  <nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
      <a class="navbar-brand" >Game Zone</a>
      <h2>Hi {{user}}!</h2>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
        <form class="d-flex" role="search">
          <button class="btn btn-outline-success" type="button" (click)="logout()">Logout</button>
        </form>
      </div>
  </nav>
  <div class="container mt-4" *ngIf="!game">
    <h2 class="mb-4">Setup Game</h2>
    <form>
      <div class="form-group">
        <label for="gridSize">Grid Size:</label>
        <input type="number" id="gridSize" class="form-control w-25" [(ngModel)]="gridSize" [ngModelOptions]="{standalone: true}" min="3" />
      </div>
      <div class="form-group">
        <label for="numberOfPlayers">Number of Players:</label>
        <input type="number" id="numberOfPlayers" class="form-control w-25" [(ngModel)]="numberOfPlayers" [ngModelOptions]="{standalone: true}" min="2" />
      </div>
      <button class="btn btn-primary mt-3" (click)="initializeGame()">Next</button>
    </form>

    <div *ngIf="players.length > 0" class="mt-4">
      <h3>Enter Player Information</h3>
      <form>
        <div *ngFor="let player of players; let i = index" class="d-flex align-items-center mb-3">
          <div class="form-group me-3">
            <label for="playerName{{i}}">Player {{i + 1}} Name:</label>
            <input type="text" id="playerName{{i}}" class="form-control" [(ngModel)]="players[i].name" [ngModelOptions]="{standalone: true}" placeholder="Enter player name" />
          </div>
          <div class="form-group">
            <label for="playerColor{{i}}">Player {{i + 1}} Color:</label>
            <input type="color" id="playerColor{{i}}" class="form-control color-circle" [(ngModel)]="players[i].color" [ngModelOptions]="{standalone: true}" />
          </div>
        </div>
        <button class="btn btn-success" (click)="createGame()">Create Game</button>
      </form>
    </div>
  </div>

  <div *ngIf="game" class="container mt-4 w-25 h-25">
    <h2 class="mb-4 p-0">Game Board</h2>
    <div class="board p-0 shadow-lg">
      <div class="row p-0 m-0" *ngFor="let row of game.board; let r = index">
        <div class="col p-0" *ngFor="let cell of row; let c = index">
          <div class="cell" (click)="makeMove(r, c)" [ngStyle]="{'background-color': cell}">
            <!-- Cell content if needed -->
          </div>
        </div>
      </div>
    </div>

    <div class="mt-4">
      <h3>Current Player: <strong>{{game.players[currentPlayerIndex]!.name}}</strong></h3>
    </div>

    <div class="mt-4">
      <h3>Scores</h3>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Player</th>
            <th>Color</th>
            <th>Points</th>
            <th>Blocks</th>
            <th>Rank</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let score of game.scores">
            <td>{{ score.player }}</td>
            <td>
              <span class="color-box" [ngStyle]="{'background-color': getColor(score.player)}"></span>
            </td>
            <td>{{ score.points }}</td>
            <td>{{ score.blocks }}</td>
            <td>{{ score.rank }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
<div class="d-flex justify-content-center">
  <button class="btn btn-outline-primary" *ngIf="isEnded" (click)="reload()">Replay</button>
</div>

</div>
